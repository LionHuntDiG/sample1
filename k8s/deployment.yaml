apiVersion: apps/v1
kind: Deployment
metadata:
  name: trackingapi
  labels:
        app: trackingapi
        component: trackingapi
spec:
  replicas: 2
  minReadySeconds: 10
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1
      maxSurge: 1 
  template:
    metadata:
      labels:
        app: trackingapi
    spec:
      containers:
      - name: trackingapi
        image: productmicroservice.azurecr.io/trackingapi:latest     
        ports:
        - containerPort: 80
        imagePullPolicy: Always   
        resources:
          requests:        
            cpu: "300m"
          limits:          
            cpu: "600m"
        


  
---



apiVersion: apps/v1
kind: Deployment
metadata:
  name: paymentapi
  labels:
        app: paymentapi
        component: paymentapi
spec:
  replicas: 1  
  minReadySeconds: 10
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1
      maxSurge: 1 
  template:
    metadata:
      labels:
        app: paymentapi
    spec:
      containers:
      - name: paymentapi
        image: productmicroservice.azurecr.io/paymentapi:latest     
        ports:
        - containerPort: 80
        imagePullPolicy: Always   
       

  


---

apiVersion: apps/v1
kind: Deployment
metadata:
  name: bookingapi
  labels:
        app: bookingapi
        component: bookingapi
spec:
  replicas: 1
  minReadySeconds: 10
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1
      maxSurge: 1 
  template:
    metadata:
      labels:
        app: bookingapi
    spec:
      containers:
      - name: bookingapi
        image: productmicroservice.azurecr.io/bookingapi:latest     
        ports:
        - containerPort: 80
        imagePullPolicy: Always   
        resources:
          requests:        
            cpu: "200m"
          limits:          
            cpu: "600m"
        

  
  
  

---

apiVersion: apps/v1
kind: Deployment
metadata:
  name: mcweb
  labels:
        app: mcweb
        component: mcweb
spec:
  replicas: 2  
  minReadySeconds: 10
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1
      maxSurge: 1 
  template:
    metadata:
      labels:
        app: mcweb
    spec:
      containers:
      - name: mcweb
        image: productmicroservice.azurecr.io/mcweb:latest     
        ports:
        - containerPort: 80
        imagePullPolicy: Always   
       

    
---
apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: webgateway
  annotations:
    kubernetes.io/ingress.class: addon-http-application-routing
spec:
  rules:
  - host: microcouriers-dns-00551aee.hcp.centralus.azmk8s.io
    http:
      paths:     
      - backend:
          serviceName: mcweb
          servicePort: 5004
        path: /
      
        
        
        
      